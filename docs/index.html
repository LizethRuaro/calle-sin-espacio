<!DOCTYPE html>
<html lang="es">

<head>
  <title>CALLE SIN ESPACIO</title>

  <link rel="stylesheet" href="estilo.css">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Moving Gallery</title>

</head>

<body> <!--no mover este body-->
  <div class="container">
    <h1 id="titulo">CALLE SIN ESPACIO</h1>

    <div class="alert alert-danger alert-dismissible style-button">
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      <strong>TRIGGER WARNING</strong> El contenido de esta página es sensible.
    </div>

    <div class="video">
      <iframe width="100%" height="100%" src="https://www.youtube.com/embed/tPMANWwBwKI" title="YouTube video player"
        frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        allowfullscreen></iframe>
    </div>

    <div class="dropdown style-dropdown">
      <button type="button" class="btn btn-danger dropdown-toggle style-dropdown" data-bs-toggle="dropdown">
        Contacto
      </button>
      <ul class="dropdown-menu">
        <li><a class="dropdown-item" href="https://www.instagram.com/lizeth_ruaro/" target="_blank">Lizeth Ruaro</a>
        </li>
        <li><a class="dropdown-item" href="https://www.instagram.com/paulina1273/" target="_blank">Paulina Arias</a>
        </li>
      </ul>
    </div>

    <!--footer>-->
    <div class="container p-5 text-white footer-capa">
      <p>CALLE SIN ESPACIO</p>
      <p>Paulina Arias, Lizeth Ruaro</p>
      <p>Universidad Autónoma Metropolitana - Unidad Lerma</p>

    </div>
  </div>

  <img class="image" data-index="0" data-status="inactive" src="./callefotos/0.PNG" />
  <img class="image" data-index="1" data-status="inactive" src="./callefotos/1.PNG" />
  <img class="image" data-index="2" data-status="inactive" src="./callefotos/2.PNG" />
  <img class="image" data-index="3" data-status="inactive" src="./callefotos/3.PNG" />
  <img class="image" data-index="4" data-status="inactive" src="./callefotos/4.PNG" />
  <img class="image" data-index="5" data-status="inactive" src="./callefotos/5.PNG" />

  <script>

    function createPopup() {
      let popup = document.createElement('div');
      popup.className = 'popup';
      popup.style.top = Math.floor(Math.random() * window.innerHeight) + 'px';
      popup.style.left = Math.floor(Math.random() * window.innerWidth) + 'px';

      let close = document.createElement('span');
      close.className = 'close';
      close.innerHTML = '&times;';
      close.onclick = () => {
        document.body.removeChild(popup);
      };

      let content = document.createElement('p');
      content.className = 'popup-text';
      let text = document.createTextNode(getRandomText());
      content.appendChild(text);

      popup.appendChild(close);
      popup.appendChild(content);
      document.body.appendChild(popup);
    }

    function getRandomText() {
      const texts = [
        '¿Por qué tan seria?',
        'Mamacitaaa',
        'Fiuuu, Fiuuuu',
        'Buenaaaaas .... tardes',
        'Ksst Ksst',
        'En cualquier palo te atoras',
        '¿A dónde tan guapa?',
        'Así me la pones',
        'Sonríe, que es un cumplido',
      ];

      let randomIndex = Math.floor(Math.random() * texts.length);
      return texts[randomIndex];
    }

    function createRandomPopups(count) {
      const minDelay = 1000; // Tiempo mínimo de aparición (en milisegundos)
      const maxDelay = 3000; // Tiempo máximo de aparición (en milisegundos)

      for (let i = 0; i < count; i++) {
        let delay = Math.floor(Math.random() * (maxDelay - minDelay + 1)) + minDelay;
        setTimeout(createPopup, delay);
      }
    }

    createRandomPopups(50);

    const images = document.getElementsByClassName("image");

    let globalIndex = 0,
      last = { x: 0, y: 0 };

    const activate = (image, x, y) => {
      image.style.left = `${x}px`;
      image.style.top = `${y}px`;
      image.style.zIndex = 1;

      image.dataset.status = "active";

      last = { x, y };
    }

    const distanceFromLast = (x, y) => {
      return Math.hypot(x - last.x, y - last.y);
    }

    const handleOnMove = e => {
      if (distanceFromLast(e.clientX, e.clientY) > (window.innerWidth / 20)) {
        const lead = images[globalIndex % images.length];
        const tail = images[(globalIndex - 5) % images.length];

        activate(lead, e.clientX, e.clientY);

        if (tail) tail.dataset.status = "inactive";

        globalIndex++;
      }
    }

    window.onmousemove = e => handleOnMove(e);

    window.ontouchmove = e => handleOnMove(e.touches[0]);
  </script>

</html>