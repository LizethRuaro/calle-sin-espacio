<!DOCTYPE html>
<html lang="es">

<head>

  <link rel="stylesheet" href="estilo.css">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Moving Gallery</title>

</head>

<body> <!--no mover este body-->
  <div>
    <h1 id="titulo">CALLE SIN ESPACIO</h1>

    <div class="alert alert-danger alert-dismissible style-button">
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      <strong>TRIGGER WARNING</strong> El contenido de esta página es sensible.
    </div>

    <div class="video">
      <iframe width="100%" height="100%" src="https://youtu.be/Nn_IMPYVwrA" title="YouTube video player" frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        allowfullscreen></iframe>
    </div>

    <div class="dropdown style-dropdown">
      <button type="button" class="btn btn-danger dropdown-toggle style-dropdown" data-bs-toggle="dropdown">
        Contacto
      </button>
      <ul class="dropdown-menu">
        <li><a class="dropdown-item" href="https://www.instagram.com/lizeth_ruaro/" target="_blank">Lizeth Ruaro</a>
        </li>
        <li><a class="dropdown-item" href="https://www.instagram.com/paulina1273/" target="_blank">Paulina Arias</a>
        </li>
      </ul>
    </div>

    <!--footer>-->
    <div class="p-5 text-white footer-capa">
      <p>CALLE SIN ESPACIO</p>
      <p>Paulina Arias, Lizeth Ruaro</p>
      <p>Universidad Autónoma Metropolitana - Unidad Lerma</p>

    </div>
  </div>

  <img class="image" data-index="0" data-status="inactive" src="./callefotos/0.PNG" />
  <img class="image" data-index="1" data-status="inactive" src="./callefotos/1.PNG" />
  <img class="image" data-index="2" data-status="inactive" src="./callefotos/2.PNG" />
  <img class="image" data-index="3" data-status="inactive" src="./callefotos/3.PNG" />
  <img class="image" data-index="4" data-status="inactive" src="./callefotos/4.PNG" />
  <img class="image" data-index="5" data-status="inactive" src="./callefotos/5.PNG" />

  <script>

    function createPopup() {
      let popup = document.createElement('div');
      popup.classList.add('popup', getRandomClassName());
      popup.style.top = Math.floor(Math.random() * window.innerHeight) + 'px';
      popup.style.left = Math.floor(Math.random() * window.innerWidth) + 'px';

      let close = document.createElement('span');
      close.className = 'close';
      close.innerHTML = '&times;';
      close.onclick = () => {
        document.body.removeChild(popup);
      };

      let content = document.createElement('p');
      content.className = 'popup-text';
      let text = document.createTextNode(getRandomText());
      content.appendChild(text);

      popup.appendChild(close);
      popup.appendChild(content);
      document.body.appendChild(popup);
    }

    function getRandomClassName() {
      const classNames = [
        'popup-xs',
        'popup-sm',
        'popup-md',
        'popup-lg',
        'popup-xl',
      ];

      let randomIndex = Math.floor(Math.random() * classNames.length);
      return classNames[randomIndex];
    }

    function getRandomText() {
      const texts = [
        '¿Por qué tan seria?',
        'Mamacitaaa',
        'Fiuuu, Fiuuuu',
        'Buenaaaaas ... tardes',
        'Ksst Ksst',
        'En cualquier palo te atoras',
        '¿A dónde tan guapa?',
        'Así me la pones',
        'Sonríe, que es un cumplido'
        '¡Qué bonitas!',
        'Vayan a mi casa',
        'No te preocupes'
        'Yo te arreglo con una cogida',
        'Yo te ... ayudo',
        'Niña, acércate',
        'Deberías dar las gracias',
        'No te voy a hacer nada',
        'No te vayas, dame un abrazo',
      ];

      let randomIndex = Math.floor(Math.random() * texts.length);
      return texts[randomIndex];
    }

    function createRandomPopups(count) {
      const minDelay = 1000;
      const maxDelay = 3000;

      for (let i = 0; i < count; i++) {
        let delay = Math.floor(Math.random() * (maxDelay - minDelay + 1)) + minDelay;
        setTimeout(createPopup, delay);
      }
    }

    const timer = ms => new Promise(res => setTimeout(res, ms))

    async function load() {
      const activate = (image, x, y) => {
        image.style.left = `${x}px`;
        image.style.top = `${y}px`;
        image.style.zIndex = 12000;

        image.dataset.status = "active";
      }

      const images = document.getElementsByClassName("image");
      for (let i = 0; i < images.length; i++) {
        console.log(i);
        activate(images[i], Math.floor(Math.random() * window.innerWidth), Math.floor(Math.random() * window.innerHeight));
        await timer(1000);
      }

      for (let i = 0; i < images.length; i++) {
        images[i].dataset.status = "inactive";
      }

      // await timer(500);

      createRandomPopups(80);
    }

    load();
  </script>

</html>